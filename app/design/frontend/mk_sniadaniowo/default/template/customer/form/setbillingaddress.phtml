<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Create account form template
 *
 * @var $this Mage_Customer_Block_Form_Register
 * 
 * 
 */

$customerAddressId = Mage::getSingleton('customer/session')->getCustomer()->getDefaultBilling();
if ($customerAddressId){
       $addr_data = Mage::getModel('customer/address')->load($customerAddressId)->getData();
}
else{
    $addr_data = array();
}
?>
<div class="change_shipping form-container" style="height:100%">
    <div class="page-title">
        <h1 class=""><?php echo $this->__('Zmień dane do faktury') ?></h1>
    </div>
    <?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
    <?php /* Extensions placeholder */ ?>
        <div class="fieldset">
            <ul class="form-list" id="checkaddress">
                <li class="fields">
                        <label for="firstname" class="required"><em>*</em><?php echo $this->__('Imię') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[firstname]" value="<?php echo $this->escapeHtml($addr_data['firstname']) ?>" title="<?php echo $this->__('Imię') ?>" id="firstname" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('firstname') ?>" />
                        </div>
                </li>
                <li class="fields">
                        <label for="lastname" class="required"><em>*</em><?php echo $this->__('Nazwisko') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[lastname]" value="<?php echo $this->escapeHtml($addr_data['lastname']) ?>" title="<?php echo $this->__('Nazwisko') ?>" id="lastname" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('lastname') ?>" />
                        </div>
                </li>
                <li class="fields">
                        <label for="b_city" class="required"><em>*</em><?php echo $this->__('Miasto') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[city]" value="<?php echo $this->escapeHtml($addr_data['city']) ?>" title="<?php echo $this->__('Miasto') ?>" id="b_city" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('city') ?>" />
                        </div>
                </li>
                <li class="fields">
                        <label for="postcode" class="required"><em>*</em><?php echo $this->__('Kod pocztowy') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[postcode]" value="<?php echo $this->escapeHtml($addr_data['postcode']) ?>" title="<?php echo $this->__('Kod pocztowy') ?>" id="postcode" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('postcode') ?>" />
                        </div>
                </li>
                <li class="fields">
                        <label for="b_street" class="required"><em>*</em><?php echo $this->__('Ulica') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[street][]" value="<?php echo $this->escapeHtml($addr_data['street']) ?>" title="<?php echo $this->__('Ulica') ?>" id="b_street" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('street') ?>" />
                        </div>
                </li>
                <li class="fields">
                        <label for="b_number" class="required"><em>*</em><?php echo $this->__('Numer domu') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[number]" value="<?php echo $this->escapeHtml($addr_data['number']) ?>" title="<?php echo $this->__('Numer domu') ?>" id="b_number" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('number') ?>" />
                        </div>
                </li>
                <li class="fields">
                        <label for="apartment" class="required"><?php echo $this->__('Numer mieszkania') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[apartment]" value="<?php echo $this->escapeHtml($addr_data['apartment']) ?>" title="<?php echo $this->__('Numer mieszkania') ?>" id="apartment" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('apartment') ?>" />
                        </div>
                </li>
                 <?php /*
                <li class="fields">
                        <label for="floor"><?php echo $this->__('Piętro') ?></label>
                        <div class="input-box">
                            <input type="text" name="shipping_floor" value="" title="<?php echo $this->__('Piętro') ?>" id="floor" style="width:50px" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('floor') ?>" />
                        </div>
                </li> */ ?>
                <li class="fields">
                        <label for="telphone"><?php echo $this->__('Telefon') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[telphone]" value="<?php echo $this->escapeHtml($addr_data['telephone']) ?>" title="<?php echo $this->__('Telefon') ?>" id="telphone" class="input-text required-entry <?php echo $this->helper('customer/address')->getAttributeValidationClass('telephone') ?>" />
                        </div>
                </li>
            </ul>
        </div>
        <div class="">
            <div class="buttons-set">
                <p class="required"><?php echo $this->__('* Wymagane pole') ?></p>
                <p class="back-link"><a href="#" class="back-link"><?php echo $this->__('Powrót') ?></a></p>
                <button id="button_save_billing_address" type="button" title="<?php echo $this->__('Zapisz') ?>" class="button" style="margin-top:0px;"><span><span><?php echo $this->__('Zapisz') ?></span></span></button>
            </div>
        </div>
</div>

<script type="text/javascript" src="<?php echo Mage::getBaseUrl('skin'); ?>frontend/mk_sniadaniowo/default/js/autocomplete/jquery-ui-autocomplete.min.js"></script>
<link rel="stylesheet" type="text/css" href="<?php echo Mage::getBaseUrl('skin'); ?>frontend/mk_sniadaniowo/default/js/autocomplete/jquery-ui-autocomplete.css" />

<script type="text/javascript">
    jQuery('input#b_city').autocomplete({
        source: '<?php echo Mage::getBaseUrl(); ?>front/front/autocomplete?type=city'
    });
    jQuery('input#b_street').autocomplete({
        source: '<?php echo Mage::getBaseUrl(); ?>front/front/autocomplete?type=street',
        search: function( event, ui ) {
            var city = encodeURIComponent(jQuery('input#b_city').val());
            jQuery('input#b_street').autocomplete('option', 'source', '<?php echo Mage::getBaseUrl(); ?>front/front/autocomplete?type=street&city='+city);
        }
    });
    jQuery('input#b_number').autocomplete({
        source: '<?php echo Mage::getBaseUrl(); ?>front/front/autocomplete?type=number',
        search: function( event, ui ) {
            var city = encodeURIComponent(jQuery('input#b_city').val());
            var street = encodeURIComponent(jQuery('input#b_street').val());
            jQuery('input#b_number').autocomplete('option', 'source', '<?php echo Mage::getBaseUrl(); ?>front/front/autocomplete?type=number&city='+city+'&street='+street);
        }
    });
    
    jQuery('#button_save_billing_address').click(function(){
    });
</script>
